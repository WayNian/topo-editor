<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <svg style="height: 100vh;width:100%">

        <g xmlns="http://www.w3.org/2000/svg" transform="matrix(9.32446,0,0,1.54836,-180310,858.05)">
            <g id="皮带编码" transform="matrix(1,0,0,1,0.218945,2.06851)">
                <g id="BH14-1" transform="matrix(-2.47461e-16,0.445194,-0.422364,5.15232e-16,21782.6,-3644.85)">
                    <rect x="11480.6" y="1837.05" width="16.391" height="723.134"
                        style="fill:#969696;stroke:#969696;stroke-width:0.85px;" />
                </g>
            </g>
        </g>
    </svg>
    <script>
        function applyInverseTransform(x, y, matrix) {
            // 对于平移变换，逆操作就是减去平移量  
            return {
                x: x - matrix[4],
                y: y - matrix[5]
            };
        }

        function getInverseTransformedRect(rect, gElements) {
            let x = rect.getAttribute('x');
            let y = rect.getAttribute('y');
            let width = rect.getAttribute('width');
            let height = rect.getAttribute('height');

            // 从内到外应用每个g元素的逆变换  
            for (let i = gElements.length - 1; i >= 0; i--) {
                const matrix = gElements[i].transform.baseVal[0].matrix;

                // 简化处理：只处理平移变换  
                // 如果包含旋转或倾斜，需要计算逆矩阵并应用  
                const inverseTransformed = applyInverseTransform(parseFloat(x), parseFloat(y), matrix);
                x = inverseTransformed.x;
                y = inverseTransformed.y;
            }

            return {
                x: x,
                y: y,
                width: width,
                height: height
            };
        }

        // 假设你已经有了一个指向SVG根元素和rect元素的引用  
        const svgRoot = document.querySelector('svg'); // 获取SVG根元素  
        const rectElement = svgRoot.querySelector('rect'); // 获取rect元素  
        const gElements = Array.from(svgRoot.querySelectorAll('g')); // 获取所有的g元素  

        // 获取rect元素在经过g元素变换前的原始坐标和大小  
        const originalRect = getInverseTransformedRect(rectElement, gElements);

        console.log('Original rect:', originalRect);

    </script>
</body>

</html>